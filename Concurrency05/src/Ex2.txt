Assignment 5, Exercise 2

It is possible that FIFO is not achieved in the scenario described in the exercise. The problem is that an item in the items array may be nil: Thread A would enqueue. While the incrementation of the tail is atomic, after this step the thread may be paused and Thread B could enqueue its item, again incrementing the tail. If now B can go on and set the item in the Array, then C dequeues before Thread A sets the item, Thread C would get the item enqueued by Thread B, as Thread A has only incremented the tail but the item value is still null - which is the criterion for going on with the next item in the dequeue method. In this case. the item added by Thread A will eventually be in the list but not dequeued by Thread C.